(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))d(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const u of t.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function d(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();var l={};const f=require("path"),i=require("express");require("mongoose");const p=require("dotenv");require("morgan");const m=require("express-handlebars"),g=require("method-override"),c=require("passport"),h=require("express-session"),y=require("connect-mongo"),b=require("../config/db");p.config({path:"./config/config.env"});require("../config/passport")(c);b();const r=i();r.use(i.urlencoded({extended:!1}));r.use(i.json());r.use(g(function(o,s){if(o.body&&typeof o.body=="object"&&"_method"in o.body){let n=o.body._method;return delete o.body._method,n}}));const{formatDate:q,stripTags:v,truncate:O,editIcon:_,select:x}=require("../helpers/hbs");r.engine(".hbs",m({helpers:{formatDate:q,stripTags:v,truncate:O,editIcon:_,select:x},defaultLayout:"main",extname:".hbs"}));r.set("view engine",".hbs");r.use(h({secret:"keyboard cat",resave:!1,saveUninitialized:!1,store:y.create({mongoUrl:"mongodb+srv://rodrigo:Nses100@x.xlnsedo.mongodb.net/?retryWrites=true&w=majority&appName=x"})}));r.use(c.initialize());r.use(c.session());r.use(function(o,s,n){s.locals.user=o.user||null,n()});r.use(i.static(f.join(__dirname,"public")));r.use("/",require("../routes/index"));r.use("/auth",require("../routes/auth"));r.use("/stories",require("../routes/stories"));const a=l.PORT||3e3;r.listen(a,console.log(`Server running in port ${a}`));
